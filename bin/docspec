#!/usr/bin/env ruby
require 'simplecov'
SimpleCov.start

require 'docspec'
require 'colsole'
include Colsole

document = ARGV[0] || 'README.md'
abort "File not found #{document}" unless File.exist? document
tester = Docspec::Tester.new document
tester.execute

say ''

if tester.success?
  say "!txtgrn!#{tester.total} tests, #{tester.errors} failed\n"
  exit 0
else
  say "!txtred!#{tester.total} tests, #{tester.errors} failed\n"
  exit 1
end


